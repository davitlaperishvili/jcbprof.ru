<div>
{% set gen_carousel_autofeatured = random(1000) %}
<div class="container-module">
<div class="title-module"><span>{{ heading_title }}</span></div>
<div class="product-slider">
<div class="container-modules autofeatured carousel_numb_autofeatured{{ gen_carousel_autofeatured }} owl-carousel">
  {% for product in products %}
   <div class="item">
    <div class="product-thumb transition">
    <div class="image">
      <a href="{{ product['href'] }}"><img src="{{ product['thumb'] }}" alt="{{ product['name'] }}" title="{{ product['name'] }}" class="img-responsive" /></a>
    </div>
    <div class="caption">
        <div class="product-name"><a href="{{ product['href'] }}">{{ product['name'] }}</a></div> 
        <div class="rating">
          <span class="rating-box">
            {% set i = 1 %}{% for i in i..5 %}
              {% if (product['rating'] < i) %}
                <span class="product-rating-star">
                  <svg width="11" height="10" viewBox="0 0 11 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M5.5 8.75L3.47287 9.81573C2.73924 10.2014 1.88181 9.57846 2.02192 8.76155L2.40907 6.50431L0.769082 4.90572C0.175565 4.32718 0.503075 3.31921 1.3233 3.20002L3.5897 2.87069L4.60326 0.816985C4.97008 0.0737394 6.02992 0.0737402 6.39674 0.816986L7.4103 2.87069L9.67671 3.20002C10.4969 3.31921 10.8244 4.32718 10.2309 4.90572L8.59093 6.50431L8.97808 8.76155C9.11819 9.57846 8.26076 10.2014 7.52713 9.81573L5.5 8.75Z" fill="#EFEFEF"/>
                  </svg>
                </span>
              {% else %}
                <span class="product-rating-star">
                  <svg width="11" height="10" viewBox="0 0 11 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M5.5 8.75L3.47287 9.81573C2.73924 10.2014 1.88181 9.57846 2.02192 8.76155L2.40907 6.50431L0.769082 4.90572C0.175565 4.32718 0.503075 3.31921 1.3233 3.20002L3.5897 2.87069L4.60326 0.816985C4.97008 0.0737394 6.02992 0.0737402 6.39674 0.816986L7.4103 2.87069L9.67671 3.20002C10.4969 3.31921 10.8244 4.32718 10.2309 4.90572L8.59093 6.50431L8.97808 8.76155C9.11819 9.57846 8.26076 10.2014 7.52713 9.81573L5.5 8.75Z" fill="#E5DB77"/>
                  </svg>
                </span>
              {% endif %}
            {% endfor %}
          </span>
        </div>

        <div class="pq-box">
          {% if (product['price']) %}
          <div class="price">
             {% if (not product['special']) %}
          <span class="price_no_format_{{ product['product_id'] }}">{{ product['price'] }}</span>
          {% else %}
          <span class="price-old"><span class="price_no_format_{{ product['product_id'] }}">{{ product['price'] }}</span></span>
          <span class="price-new"><span class="special_no_format_{{ product['product_id'] }}">{{ product['special'] }}</span></span>
        {% endif %}
            {% if (product['tax']) %}
            <span class="price-tax">{{ text_tax }} {{ product['tax'] }}</span>
            {% endif %}
          </div>
        {% endif %}
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
  </div>
  </div>
<script>
if ($(".carousel_numb_autofeatured{{ gen_carousel_autofeatured }}").parents("#column-left, #column-right, .position-no-owl").length) {
  {% set item_w = '500' %}
  $('.carousel_numb_autofeatured{{ gen_carousel_autofeatured }}').each(function() {
      var items = $(this).children('div.item');
    for (var i = 0; i < items.length; i+=3) {
        items.slice(i, i+3).wrapAll('<div class="row_items"></div>');
      }
  });
} else {
  {% set item_w = '300' %}
}
$('.carousel_numb_autofeatured{{ gen_carousel_autofeatured }}').owlCarousel({
  responsiveBaseWidth: ".carousel_numb_autofeatured{{ gen_carousel_autofeatured }}",
  itemsCustom: [[0, 1], [{{ item_w }}, 2], [750, 3], [950,4], [1150,5], [1430,6]],
  slideSpeed: 200,
  paginationSpeed: 300,
  navigation: true,
  stopOnHover: true,
  mouseDrag: false,
  pagination: false,
  autoPlay: false,
  navigationText: ['<div class="btn btn-carousel-module next-prod"><i class="fa fa-angle-left arrow"></i></div>', '<div class="btn btn-carousel-module prev-prod"><i class="fa fa-angle-right arrow"></i></div>'],
});
</script>
</div>
</div>